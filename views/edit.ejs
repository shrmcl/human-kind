<!-- adds header.ejs -->
<%- include("partials/header") %>
<%- include("partials/inNavbar") %>

<!-- capture this user's _id and current pic to be used on back-end -->
<div class="container signup">

  <div class="row mb-md-5 mb-0">
    <div id="dashboard-welcome" class="col">
        <a class="logo-small" style="text-align: center; margin: 0 auto" href="/dashboard">human:kind</a>
    </div>
  </div>

  <h3 style="color: #9A9A9A">Edit your profile</h3><br/>
  <!-- <p class="instruction">All fields required</p> -->
<form
  action="/edit?id=<%= user._id %>&pic=<%= user.pic %>"
  method="POST"
  enctype="multipart/form-data"
>
  
    <label for="fname">First name:</label>
    <input
      type="text"
      id="fname"
      name="firstName"
      required
      value="<%= user.firstName %>"
    />

    <label for="lname">Last name:</label>
    <input
      type="text"
      id="lname"
      name="lastName"
      required
      value="<%= user.lastName %>"
    />

    <label for="email">Email</label>
    <input
      type="text"
      id="email"
      name="email"
      required
      value="<%= user.email %>"
    />

    <label for="uname">Username:</label>
    <input
      type="text"
      placeholder="username"
      id="uname"
      name="username"
      required
      value="<%= user.username %>"
    />

    <label for="bio">Describe yourself (max. 60 chars):</label>
    <textarea id="bio" name="bio" cols="80" rows="1" maxlength="60"><%= user.bio %></textarea>

    
    <div class="bubbles radio-only">
      <p class="label">Age:</p>
      <input type="radio" name="age" id="0-20" value="0-20" <%= user.ageRange && user.ageRange.includes("0-20") ? "checked" : "" %>/>
      <label for="0-20">Under 20</label>

      <input type="radio" name="age" id="20-30" value="20-30" <%= user.ageRange && user.ageRange.includes("20-30") ? "checked" : "" %>/>
      <label for="20-30">20-30</label>

      <input type="radio" name="age" id="30-40" value="30-40" <%= user.ageRange && user.ageRange.includes("30-40") ? "checked" : "" %>/>
      <label for="30-40">30-40</label>

      <input type="radio" name="age" id="40-50" value="40-50" <%= user.ageRange && user.ageRange.includes("40-50") ? "checked" : "" %>/>
      <label for="40-50">40-50</label>

      <input type="radio" name="age" id="50-60" value="50-60" <%= user.ageRange && user.ageRange.includes("50-60") ? "checked" : "" %>/>
      <label for="50-60">50-60</label>

      <input type="radio" name="age" id="60-70" value="60-70" <%= user.ageRange && user.ageRange.includes("60-70") ? "checked" : "" %>/>
      <label for="60-70">60-70</label>

      <input type="radio" name="age" id="70+" value="70+" <%= user.ageRange && user.ageRange.includes("70+") ? "checked" : "" %>/>
      <label for="70+">70+</label>
    </div>
 
    <div class="bubbles radio-only">
      <p class="label">Gender:</p>
      <input type="radio" name="gender" id="female" value="female" <%= user.gender && user.gender.includes("female") ? "checked" : "" %>/>
      <label class="padright" for="female">Female</label>
      <input type="radio" name="gender" id="male" value="male" <%= user.gender && (user.gender.length === 4) ? "checked" : "" %>/>
      <label class="padright" for="male">Male</label>
      <input type="radio" name="gender" id="nonbinary" value="nonbinary" <%= user.gender && user.gender.includes("nonbinary") ? "checked" : "" %>/>
      <label class="padright" for="nonbinary">Nonbinary</label>
      <input type="radio" name="gender" id="other" value="other" <%= user.gender && user.gender.includes("other") ? "checked" : "" %>/>
      <label class="padright" for="other">Other</label>
    </div>

    <div class="bubbles check-only">
      <p class="label">What social issues are you interested in? - Select all that apply.</span></p>
      <input type="checkbox" id="animals" name="interests" value="animals" <%= user.interests && user.interests.includes("animals") ? "checked" : "" %>/>
      <label class="padright" for="animals">Animals</label>
      <input type="checkbox" id="housing" name="interests" value="housing" <%= user.interests && user.interests.includes("housing") ? "checked" : "" %>/>
      <label class="padright" for="housing">Housing</label>
      <input type="checkbox" id="cleanup" name="interests" value="environment" <%= user.interests && user.interests.includes("environment") ? "checked" : "" %>/>
      <label class="padright" for="cleanup">Neighborhood Cleanup</label>
      <input type="checkbox" id="food" name="interests" value="hunger" <%= user.interests && user.interests.includes("hunger") ? "checked" : "" %>/>
      <label class="padright" for="food">Food & Hunger</label>
      <input type="checkbox" id="organizing" name="interests" value="community" <%= user.interests && user.interests.includes("community") ? "checked" : "" %>/>
      <label class="padright" for="organizing">Community Organizing</label>
      <input type="checkbox" id="lgbtq" name="interests" value="LGBTQ+" <%= user.interests && user.interests.includes("LGBTQ+") ? "checked" : "" %>/>
      <label class="padright" for="lgbtq">LGBTQ+</label>
      <input type="checkbox" id="elderly" name="interests" value="elderly" <%= user.interests && user.interests.includes("elderly") ? "checked" : "" %>/>
      <label class="padright" for="elderly">Elderly</label>
      <input type="checkbox" id="incarceration" name="interests"
      value="incarceration" <%= user.interests && user.interests.includes("incarceration") ? "checked" : "" %>/>
      <label class="padright" for="incarceration">Incarceration</label>
    </div>

    <label for="pic">Add a profile image:</label>
    <%# instant photo preview %>
    <img id="preview-edit" src=<%= user.pic %> alt="">
    <input
      type="file"
      name="image"
      id="pic"
      onchange="document.getElementById('preview-edit').src = window.URL.createObjectURL(this.files[0])"
    />

    <input type="submit" class="button" value="Submit Changes" />
</form>
</div>

<%- include("partials/footer") %>